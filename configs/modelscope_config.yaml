# ============================================
# ModelScope Configuration
# Model 1: Human Action Video Generation
# ============================================

model:
  name: "modelscope-text-to-video"
  type: "diffusion-based"
  architecture: "3d-unet"

  # Model dimensions
  unet_dim: 320
  attention_heads: 8
  num_layers: 4
  temporal_layers: 4

dataset:
  name: "something-something-v2"
  total_videos: 10000
  num_classes: 174

  # Video specifications
  resolution:
    height: 256
    width: 256
  num_frames: 24
  fps: 8

  # Data paths (update these)
  train_data_dir: "data/something-something-v2/train"
  val_data_dir: "data/something-something-v2/val"
  annotations_file: "data/something-something-v2/annotations.json"

training:
  # Batch configuration
  batch_size: 4
  gradient_accumulation_steps: 4
  effective_batch_size: 16

  # Optimization
  learning_rate: 1.0e-4
  lr_scheduler: "cosine"
  warmup_steps: 1000
  max_train_steps: 100000

  # Optimizer settings
  optimizer: "AdamW"
  weight_decay: 0.01
  adam_beta1: 0.9
  adam_beta2: 0.999
  adam_epsilon: 1.0e-8
  max_grad_norm: 1.0

  # Mixed precision
  mixed_precision: "fp16"
  gradient_checkpointing: true

  # Logging and checkpointing
  logging_steps: 100
  validation_steps: 1000
  checkpoint_steps: 5000
  save_total_limit: 3

diffusion:
  num_train_timesteps: 1000
  num_inference_steps: 50
  beta_schedule: "scaled_linear"
  beta_start: 0.0001
  beta_end: 0.02
  prediction_type: "epsilon"

hardware:
  device: "cuda"
  num_gpus: 1
  gpu_model: "A100-80GB"
  dataloader_num_workers: 8
  pin_memory: true

  # Memory optimization
  enable_xformers: true
  enable_flash_attention: false

output:
  output_dir: "outputs/modelscope"
  checkpoint_dir: "outputs/modelscope/checkpoints"
  logging_dir: "outputs/modelscope/logs"
  samples_dir: "outputs/modelscope/samples"

inference:
  default_num_frames: 24
  default_guidance_scale: 7.5
  default_num_inference_steps: 50

# Results from training
results:
  training_time_hours: 9.48
  final_loss: 0.1036
  gpu_utilization_avg: 0.95
